{% extends "base.html" %}

{% block title %} {{ protein.name }} - network view - {{ super() }} {% endblock %}

{% block head %}
    {{ super() }}

  {# jQuery #}
  <script src="/static/thirdparty/jquery-1.12.0.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  {# D3.js #}
  <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>

{% endblock %}


{% block content %}

<h3>{{ protein.name }}</h3>

<ol class="breadcrumb">
  <li><a href="/">Home</a></li>
  <li><a href="/protein">Proteins</a></li>
  <li><a href="/network">Network</a></li>
  <li class="active">{{ protein.name }}</li>
</ol>

<div id="network_plot"></div>

<div class="panel panel-default">
    <div class="panel-body">
      <div class="panel-heading">
        <h3 class="panel-title">Filters</h3>
      </div>
    {% with filters=filters %}
      {% include 'widgets/filters.html' %}
    {% endwith %}
 </div>
</div>
{% endblock %}


{% block footer_js %}
    {% assets "js_network_view" %}
	<script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
    <script type="text/javascript">

    Network.init({
        element: document.getElementById('network_plot'),
        data: {{ data | safe }},
        dataURL: '{{ url_for('NetworkView:kinases', name=protein.name) }}',
        minimalRadius: 15,
        ratio: 0.5, /* remember to keep update with style of network */
        nodeURL: function(node){
            return '{{ url_for('ProteinView:show', name='') }}' + node.name
        }
    })

    </script>
{% endblock %}
