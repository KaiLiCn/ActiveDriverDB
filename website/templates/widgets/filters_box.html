{% extends 'widgets/widgets_panel.html' %}
{% from 'widgets/widgets.html' import widget_list %}
{% from 'widgets/widgets.html' import render_widget %}

{% block panel_class %}filters-panel{% endblock %}


{% block panel_title %}
  Data Filters
{% endblock %}


{% block widgets %}

  <div class="dataset-widgets">

    <div class="is-ptm">
      {{ render_widget(widgets.is_ptm) }}
    </div>

    <div class="dataset">
      {{ render_widget(widgets.dataset) }}
      {% if widgets.custom_dataset.labels %}
          {{ render_widget(widgets.custom_dataset) }}
      {% endif %}
    </div>

    {% set are_many = widgets.dataset_specific | selectattr('visible') | first | attr('data') | list | length > 4 %}
    <div class="dataset-specific {{ 'list-collapsed' if are_many }}">
      {{ widget_list(widgets.dataset_specific) }}
      {% if are_many %}
        <a href="#" class="list-expand">more</a>
      {% endif %}
    </div>

  </div>

  <div class="other-widgets">
    <div class="ptm-type">
      {{ render_widget(widgets.ptm_type) }}
    </div>
    <div class="other">
      {{ widget_list(widgets.other) }}
    </div>
  </div>

{% endblock %}
